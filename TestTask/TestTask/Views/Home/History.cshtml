@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>History</title>

    <script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <script src="~/Scripts/bootstrap.js"></script>

    <style>
        .table-head {
            background-color: #454d55;
            color: white;
            text-align: center;
        }

        .fixed_header {
            width: 100%;
            table-layout: fixed;
        }

        .fixed_header tbody {
            display: block;
            width: 100%;
            overflow: auto;
            height: 45vh;
        }

        .fixed_header thead tr {
            display: block;
        }

        .fixed_header th, .fixed_header td {
            width: 100%;
        }

    </style>

</head>
<body>
    <div>

        <!--Chart-->
        <div class="col">

            <!--chart is visible if url was calculated-->
            <div id="chart1" style="height: 40vh;"></div>

            <!-- you need to include the shieldui css and js assets in order for the charts to work -->
            <link rel="stylesheet" type="text/css" href="https://www.shieldui.com/shared/components/latest/css/light-bootstrap/all.min.css" />
            <script type="text/javascript" src="https://www.shieldui.com/shared/components/latest/js/shieldui-all.min.js"></script>

            <script type="text/javascript">

                jQuery(function ($) {

                    var data1 = [];
                    var values1 = [];

                    @{ var id = 1;}
                    @foreach (var item in ViewBag.siteMap)
                    {
                        if (item.MidResponseTime != "No Respond")
                        {
                            <text>data1.push(parseFloat(@item.MidResponseTime));</text>
                            <text>values1.push(parseFloat(@id));</text>
                        } 
                        { id++;}
                    }

                    $("#chart1").shieldChart({
                    primaryHeader: {
                        text: "Response chart"
                        },
                        exportOptions: {
                        image: false,
                            print: false
                        },
                        axisX: {
                            categoricalValues: values1
                        },
                        dataSeries: [{
                        seriesType: "bar",
                            collectionAlias: "Time of response",
                            data: data1
                        }]
                    });

                });

            </script>

        </div>

        <!--Address-->
        <input type="text" class="form-control" placeholder="URL" name="url" value="@ViewData["url-time"]" readonly="readonly" style="float: left; width: 100%; text-align: center; font-size: 30px">

        <!--Results Table (visible if url calculated)-->
        <div class="col" style="margin-top: 50px;">

            <table class="table, fixed_header">
                <thead>
                    <tr class="table-head">

                        <!--Headers-->
                        <th scope="col" style="text-align: center; width: 5vw">
                            №
                        </th>
                        <th scope="col" style="text-align: center; width: 35vw">
                            URL
                        </th>
                        <th scope="col" style="text-align: center; width: 20vw">
                            MID Response time
                        </th>
                        <th scope="col" style="text-align: center; text-wrap: normal; width: 20vw">
                            MIN Response time
                        </th>
                        <th scope="col" style="text-align: center; text-wrap: normal; width: 20vw">
                            MAX Response time
                        </th>

                    </tr>
                </thead>
                <tbody>

                    <!--Data output-->
                    @{ var counter = 1; }
                    @foreach (var item in ViewBag.siteMap)
                    {
                        <tr>
                            <th scope="row" style="text-align: center; width: 5vw">@counter</th>
                            <th scope="row" style="text-align: center; width: 35vw">@item.SubUrl</th>
                            <th scope="row" style="text-align: center; width: 20vw">@item.MidResponseTime</th>
                            <th scope="row" style="text-align: center; width: 20vw">@item.MinResponseTime</th>
                            <th scope="row" style="text-align: center; width: 20vw">@item.MaxResponseTime</th>
                        </tr>
                        { counter++; }
                    }

                </tbody>
            </table>
        </div>


    </div>

</body>
</html>
